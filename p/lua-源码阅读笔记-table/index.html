<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Lua æºç é˜…è¯»ç¬”è®°-Table luaç‰ˆæœ¬åŸºäº5.4.6ï¼Œ æ–‡ç« æ›´å¤šæ˜¯è®°å½•è‡ªå·±åœ¨é˜…è¯»çš„æ˜¯æ€ç»ªï¼Œè€Œéç§‘æ™®ã€‚\nå¾ˆå¤šæºç æ¯”è¾ƒé•¿ï¼Œç›´æ¥è´´ä¸å¤ªå¥½ï¼Œå»ºè®®é˜…è¯»æ—¶é…åˆç€æºç ä¸€èµ·ã€‚\nå¦‚æœå†…å®¹æœ‰é—®é¢˜æˆ–è€…ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚\nLuaçš„Table Luaçš„table æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥åŒæ—¶ä½œä¸ºæ•°ç»„å’Œå­—å…¸ï¼Œåœ¨å†…éƒ¨å®ç°ä¸Šå®é™…æ˜¯æœ‰åŒºåˆ†è¿™ä¸¤ä¸ªç±»å‹çš„ã€‚\né¦–å…ˆçœ‹ä¸€ä¸‹Tableçš„åŸºæœ¬ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11 typedef struct Table { CommonHeader; lu_byte flags; /* 1<<p means tagmethod(p) is not present */ lu_byte lsizenode; /* log2 of size of 'node' array */ unsigned int alimit; /* &#34;limit&#34; of 'array' array */ TValue *array; /* array part */ Node *node; Node *lastfree; /* any free position is before this position */ struct Table *metatable; GCObject *gclist; } Table; flags lsizenode: log2(å­—å…¸å¤§å°) çš„ç»“æœï¼Œ è¿™è¾¹ä¹Ÿè¿˜è¯´æ˜ä½œä¸ºå­—å…¸çš„æ—¶å€™ï¼Œå¤§å°ä¸€å®šæ˜¯2çš„å€æ•° alimit: çœ‹èµ·æ¥æ˜¯æ•°ç»„çš„å¤§å°ï¼Œä½†ä¸ä¸€å®šæ—¶å‡†ç¡®çš„æ•°ç»„å¤§å° arrayï¼š å½“tableæ˜¯æ•°ç»„æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½® node: å½“tableæ˜¯å­—å…¸æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½® lastfree: å½“tableåˆšç”³è¯·çš„æ—¶å€™ï¼ŒæŒ‡å‘tableçš„æœ«å°¾ï¼Œå†²çªæ—¶ä¼šå‘å‰ç§»åŠ¨è¿™ä¸ªæŒ‡é’ˆï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®\n"><title>Lua æºç é˜…è¯»ç¬”è®°-Table</title>
<link rel=canonical href=https://frozenlychees.github.io/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/><link rel=stylesheet href=/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css><meta property='og:title' content="Lua æºç é˜…è¯»ç¬”è®°-Table"><meta property='og:description' content="Lua æºç é˜…è¯»ç¬”è®°-Table luaç‰ˆæœ¬åŸºäº5.4.6ï¼Œ æ–‡ç« æ›´å¤šæ˜¯è®°å½•è‡ªå·±åœ¨é˜…è¯»çš„æ˜¯æ€ç»ªï¼Œè€Œéç§‘æ™®ã€‚\nå¾ˆå¤šæºç æ¯”è¾ƒé•¿ï¼Œç›´æ¥è´´ä¸å¤ªå¥½ï¼Œå»ºè®®é˜…è¯»æ—¶é…åˆç€æºç ä¸€èµ·ã€‚\nå¦‚æœå†…å®¹æœ‰é—®é¢˜æˆ–è€…ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚\nLuaçš„Table Luaçš„table æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥åŒæ—¶ä½œä¸ºæ•°ç»„å’Œå­—å…¸ï¼Œåœ¨å†…éƒ¨å®ç°ä¸Šå®é™…æ˜¯æœ‰åŒºåˆ†è¿™ä¸¤ä¸ªç±»å‹çš„ã€‚\né¦–å…ˆçœ‹ä¸€ä¸‹Tableçš„åŸºæœ¬ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11 typedef struct Table { CommonHeader; lu_byte flags; /* 1<<p means tagmethod(p) is not present */ lu_byte lsizenode; /* log2 of size of 'node' array */ unsigned int alimit; /* &#34;limit&#34; of 'array' array */ TValue *array; /* array part */ Node *node; Node *lastfree; /* any free position is before this position */ struct Table *metatable; GCObject *gclist; } Table; flags lsizenode: log2(å­—å…¸å¤§å°) çš„ç»“æœï¼Œ è¿™è¾¹ä¹Ÿè¿˜è¯´æ˜ä½œä¸ºå­—å…¸çš„æ—¶å€™ï¼Œå¤§å°ä¸€å®šæ˜¯2çš„å€æ•° alimit: çœ‹èµ·æ¥æ˜¯æ•°ç»„çš„å¤§å°ï¼Œä½†ä¸ä¸€å®šæ—¶å‡†ç¡®çš„æ•°ç»„å¤§å° arrayï¼š å½“tableæ˜¯æ•°ç»„æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½® node: å½“tableæ˜¯å­—å…¸æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½® lastfree: å½“tableåˆšç”³è¯·çš„æ—¶å€™ï¼ŒæŒ‡å‘tableçš„æœ«å°¾ï¼Œå†²çªæ—¶ä¼šå‘å‰ç§»åŠ¨è¿™ä¸ªæŒ‡é’ˆï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®\n"><meta property='og:url' content='https://frozenlychees.github.io/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/'><meta property='og:site_name' content='FrozenLychees'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2023-09-23T00:00:00+00:00'><meta property='article:modified_time' content='2023-09-23T00:00:00+00:00'><meta property='og:image' content='https://frozenlychees.github.io/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/lua.png'><meta name=twitter:title content="Lua æºç é˜…è¯»ç¬”è®°-Table"><meta name=twitter:description content="Lua æºç é˜…è¯»ç¬”è®°-Table luaç‰ˆæœ¬åŸºäº5.4.6ï¼Œ æ–‡ç« æ›´å¤šæ˜¯è®°å½•è‡ªå·±åœ¨é˜…è¯»çš„æ˜¯æ€ç»ªï¼Œè€Œéç§‘æ™®ã€‚\nå¾ˆå¤šæºç æ¯”è¾ƒé•¿ï¼Œç›´æ¥è´´ä¸å¤ªå¥½ï¼Œå»ºè®®é˜…è¯»æ—¶é…åˆç€æºç ä¸€èµ·ã€‚\nå¦‚æœå†…å®¹æœ‰é—®é¢˜æˆ–è€…ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚\nLuaçš„Table Luaçš„table æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥åŒæ—¶ä½œä¸ºæ•°ç»„å’Œå­—å…¸ï¼Œåœ¨å†…éƒ¨å®ç°ä¸Šå®é™…æ˜¯æœ‰åŒºåˆ†è¿™ä¸¤ä¸ªç±»å‹çš„ã€‚\né¦–å…ˆçœ‹ä¸€ä¸‹Tableçš„åŸºæœ¬ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11 typedef struct Table { CommonHeader; lu_byte flags; /* 1<<p means tagmethod(p) is not present */ lu_byte lsizenode; /* log2 of size of 'node' array */ unsigned int alimit; /* &#34;limit&#34; of 'array' array */ TValue *array; /* array part */ Node *node; Node *lastfree; /* any free position is before this position */ struct Table *metatable; GCObject *gclist; } Table; flags lsizenode: log2(å­—å…¸å¤§å°) çš„ç»“æœï¼Œ è¿™è¾¹ä¹Ÿè¿˜è¯´æ˜ä½œä¸ºå­—å…¸çš„æ—¶å€™ï¼Œå¤§å°ä¸€å®šæ˜¯2çš„å€æ•° alimit: çœ‹èµ·æ¥æ˜¯æ•°ç»„çš„å¤§å°ï¼Œä½†ä¸ä¸€å®šæ—¶å‡†ç¡®çš„æ•°ç»„å¤§å° arrayï¼š å½“tableæ˜¯æ•°ç»„æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½® node: å½“tableæ˜¯å­—å…¸æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½® lastfree: å½“tableåˆšç”³è¯·çš„æ—¶å€™ï¼ŒæŒ‡å‘tableçš„æœ«å°¾ï¼Œå†²çªæ—¶ä¼šå‘å‰ç§»åŠ¨è¿™ä¸ªæŒ‡é’ˆï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://frozenlychees.github.io/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/lua.png'><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-KCSZNN6B9X"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KCSZNN6B9X")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/forzenLychees_hu14353860160155089042.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>FrozenLychees</a></h1><h2 class=site-description>å¤©å¤©æ‘¸é±¼èº«ä½“æ£’</h2></div></header><ol class=menu-social><li><a href=https://github.com/FrozenLychees target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#luaçš„table>Luaçš„Table</a></li></ol><ol><li><a href=#luah_getshortstr>luaH_getshortstr</a></li><li><a href=#luah_getint>luaH_getint</a></li><li><a href=#getgeneric>getgeneric</a></li></ol><ol><li><a href=#luah_finishset>luaH_finishset</a></li><li><a href=#rehash>rehash</a></li><li><a href=#å–é•¿åº¦æ“ä½œ>å–é•¿åº¦æ“ä½œ</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/lua_hu16118442362011376381.png srcset="/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/lua_hu16118442362011376381.png 800w, /p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/lua_hu16140590710786694836.png 1600w" width=800 height=340 loading=lazy alt="Featured image of post Lua æºç é˜…è¯»ç¬”è®°-Table"></a></div><div class=article-details><header class=article-category><a href=/categories/lua/>Lua</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/>Lua æºç é˜…è¯»ç¬”è®°-Table</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2023-09-23</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h1 id=lua-æºç é˜…è¯»ç¬”è®°-table>Lua æºç é˜…è¯»ç¬”è®°-Table</h1><p>luaç‰ˆæœ¬åŸºäº5.4.6ï¼Œ æ–‡ç« æ›´å¤šæ˜¯è®°å½•è‡ªå·±åœ¨é˜…è¯»çš„æ˜¯æ€ç»ªï¼Œè€Œéç§‘æ™®ã€‚</p><p>å¾ˆå¤šæºç æ¯”è¾ƒé•¿ï¼Œç›´æ¥è´´ä¸å¤ªå¥½ï¼Œå»ºè®®é˜…è¯»æ—¶é…åˆç€æºç ä¸€èµ·ã€‚</p><p>å¦‚æœå†…å®¹æœ‰é—®é¢˜æˆ–è€…ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚</p><h2 id=luaçš„table>Luaçš„Table</h2><p>Luaçš„table æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥åŒæ—¶ä½œä¸ºæ•°ç»„å’Œå­—å…¸ï¼Œåœ¨å†…éƒ¨å®ç°ä¸Šå®é™…æ˜¯æœ‰åŒºåˆ†è¿™ä¸¤ä¸ªç±»å‹çš„ã€‚</p><p>é¦–å…ˆçœ‹ä¸€ä¸‹Tableçš„åŸºæœ¬ç»“æ„</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>typedef struct Table {
</span></span><span class=line><span class=cl>  CommonHeader;
</span></span><span class=line><span class=cl>  lu_byte flags;  /* 1&lt;&lt;p means tagmethod(p) is not present */
</span></span><span class=line><span class=cl>  lu_byte lsizenode;  /* log2 of size of &#39;node&#39; array */
</span></span><span class=line><span class=cl>  unsigned int alimit;  /* &#34;limit&#34; of &#39;array&#39; array */
</span></span><span class=line><span class=cl>  TValue *array;  /* array part */
</span></span><span class=line><span class=cl>  Node *node;
</span></span><span class=line><span class=cl>  Node *lastfree;  /* any free position is before this position */
</span></span><span class=line><span class=cl>  struct Table *metatable;
</span></span><span class=line><span class=cl>  GCObject *gclist;
</span></span><span class=line><span class=cl>} Table;
</span></span></code></pre></td></tr></table></div></div><p>flags
lsizenode: log2(å­—å…¸å¤§å°) çš„ç»“æœï¼Œ è¿™è¾¹ä¹Ÿè¿˜è¯´æ˜ä½œä¸ºå­—å…¸çš„æ—¶å€™ï¼Œå¤§å°ä¸€å®šæ˜¯2çš„å€æ•°
alimit: çœ‹èµ·æ¥æ˜¯æ•°ç»„çš„å¤§å°ï¼Œä½†ä¸ä¸€å®šæ—¶å‡†ç¡®çš„æ•°ç»„å¤§å°
arrayï¼š å½“tableæ˜¯æ•°ç»„æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½®
node: å½“tableæ˜¯å­—å…¸æ—¶ï¼ŒæŒ‡å‘ä½¿ç”¨çš„å†…å­˜ä½ç½®
lastfree: å½“tableåˆšç”³è¯·çš„æ—¶å€™ï¼ŒæŒ‡å‘tableçš„æœ«å°¾ï¼Œå†²çªæ—¶ä¼šå‘å‰ç§»åŠ¨è¿™ä¸ªæŒ‡é’ˆï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®</p><p>metatable: æŒ‡å‘è¿™ä¸ªè¡¨çš„åŸè¡¨
gclist: gcç›¸å…³é“¾è¡¨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>typedef struct TValue {
</span></span><span class=line><span class=cl>  TValuefields;
</span></span><span class=line><span class=cl>} TValue;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>typedef union Node {
</span></span><span class=line><span class=cl>  struct NodeKey {
</span></span><span class=line><span class=cl>    TValuefields;  /* fields for value */
</span></span><span class=line><span class=cl>    lu_byte key_tt;  /* key type */
</span></span><span class=line><span class=cl>    int next;  /* for chaining */
</span></span><span class=line><span class=cl>    Value key_val;  /* key value */
</span></span><span class=line><span class=cl>  } u;
</span></span><span class=line><span class=cl>  TValue i_val;  /* direct access to node&#39;s value as a proper &#39;TValue&#39; */
</span></span><span class=line><span class=cl>} Node;
</span></span></code></pre></td></tr></table></div></div><p>node å¯¹è±¡çš„ç»„æˆå®é™…ä¸Šå°±æ˜¯NodeKeyï¼Œ è™½ç„¶æ•´ä¸ªNodeæ˜¯unionæ ‡è¯†çš„ï¼Œä½†å®é™…ä¸ŠNodeKeyè¿™ä¸ªç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªå­—æ®µå’ŒTValue æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥i_valåªæ˜¯ä¸€ä¸ªå¿«é€Ÿè®¿é—®nodeä¸­valueçš„å­—æ®µçš„æ–¹å¼ã€‚</p><p>å›åˆ°NodeKeyä¸Šé¢ï¼ŒNodeKeyç”±ä»¥ä¸‹å­—æ®µç»„æˆ</p><ul><li>TValuefields å­˜å‚¨valueçš„ç±»å‹å’Œå€¼(æˆ–è€…æŒ‡é’ˆ)</li><li>key_tt keyçš„ç±»å‹</li><li>key_val key çš„å€¼</li><li>next hashå†²çªæ—¶ä½¿ç”¨é“¾è¡¨æ¥è§£å†³ã€‚</li></ul><p><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/luaTableStruct.png width=599 height=442 srcset="/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/luaTableStruct_hu522271568651490559.png 480w, /p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-table/luaTableStruct_hu8403114765158214754.png 1024w" loading=lazy alt="Alt text" class=gallery-image data-flex-grow=135 data-flex-basis=325px></p><p>è¿™è¾¹é™„ä¸Šã€Šluaè®¾è®¡ä¸å®ç°ã€‹ ä¸€ä¹¦ä¸­çš„å¯¹äºè¡¨ç»“æ„çš„å›¾ï¼Œæ³¨æ„ä¹¦ä¸­æ˜¯LUA5.1çš„ç»“æ„ï¼Œæˆ‘é˜…è¯»çš„æ—¶LUA5.4ç¨å¾®æœ‰ç‚¹åŒºåˆ«ï¼Œä½†åŸºæœ¬ç±»ä¼¼, å›¾æ–¹ä¾¿æ²¡æœ‰è‡ªå·±ç”»å›¾ã€‚</p><h1 id=table-çš„æœç´¢>table çš„æœç´¢</h1><p>å…ˆçœ‹ä»¥ä¸‹å¯¹äºä¸€ä¸ªtableï¼Œluaæ˜¯æ€ä¹ˆå°è¯•æ‰¾åˆ°å¯¹åº”çš„å€¼çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>/*</span>
</span></span><span class=line><span class=cl><span class=o>**</span> <span class=n>main</span> <span class=n>search</span> <span class=n>function</span>
</span></span><span class=line><span class=cl><span class=o>*/</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>luaH_get</span> <span class=p>(</span><span class=n>Table</span> <span class=o>*</span><span class=n>t</span><span class=p>,</span> <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>switch</span> <span class=p>(</span><span class=n>ttypetag</span><span class=p>(</span><span class=n>key</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>LUA_VSHRSTR</span><span class=p>:</span> <span class=k>return</span> <span class=n>luaH_getshortstr</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>tsvalue</span><span class=p>(</span><span class=n>key</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>LUA_VNUMINT</span><span class=p>:</span> <span class=k>return</span> <span class=n>luaH_getint</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>ivalue</span><span class=p>(</span><span class=n>key</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>LUA_VNIL</span><span class=p>:</span> <span class=k>return</span> <span class=o>&amp;</span><span class=n>absentkey</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=n>LUA_VNUMFLT</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>lua_Integer</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>luaV_flttointeger</span><span class=p>(</span><span class=n>fltvalue</span><span class=p>(</span><span class=n>key</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>k</span><span class=p>,</span> <span class=n>F2Ieq</span><span class=p>))</span> <span class=o>/*</span> <span class=n>integral</span> <span class=n>index</span><span class=err>?</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>luaH_getint</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>k</span><span class=p>);</span>  <span class=o>/*</span> <span class=n>use</span> <span class=n>specialized</span> <span class=n>version</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>      <span class=o>/*</span> <span class=k>else</span><span class=o>...</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>  <span class=o>/*</span> <span class=n>FALLTHROUGH</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>    <span class=n>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>getgeneric</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯¹äºä¸€ä¸ªtableå’Œä¸€ä¸ªæŒ‡å®šçš„keyï¼Œä¼šæ ¹æ®keyçš„ç±»å‹æ¥å†³å®šè°ƒç”¨ä»€ä¹ˆæ–¹å¼æœç´¢ï¼›</p><ul><li>å½“key æ˜¯short strçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨luaH_getshortstr</li><li>å½“key æ˜¯int æˆ–è€…æ˜¯ ç­‰äºæ•´æ•°çš„floatçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨luaH_getint</li><li>å½“key æ˜¯nilçš„æ—¶å€™ï¼Œç›´æ¥è¿”å›absentkeyï¼ˆä¸å­˜åœ¨çš„key</li><li>å…¶ä»–æƒ…å†µè°ƒç”¨getgeneric</li></ul><h2 id=luah_getshortstr>luaH_getshortstr</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>luaH_getshortstr</span> <span class=p>(</span><span class=n>Table</span> <span class=o>*</span><span class=n>t</span><span class=p>,</span> <span class=n>TString</span> <span class=o>*</span><span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=ne>Node</span> <span class=o>*</span><span class=n>n</span> <span class=o>=</span> <span class=n>hashstr</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>lua_assert</span><span class=p>(</span><span class=n>key</span><span class=o>-&gt;</span><span class=n>tt</span> <span class=o>==</span> <span class=n>LUA_VSHRSTR</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(;;)</span> <span class=p>{</span>  <span class=o>/*</span> <span class=n>check</span> <span class=n>whether</span> <span class=s1>&#39;key&#39;</span> <span class=n>is</span> <span class=n>somewhere</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>chain</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>keyisshrstr</span><span class=p>(</span><span class=n>n</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=n>eqshrstr</span><span class=p>(</span><span class=n>keystrval</span><span class=p>(</span><span class=n>n</span><span class=p>),</span> <span class=n>key</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>gval</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>  <span class=o>/*</span> <span class=n>that</span><span class=s1>&#39;s it */</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=ne>int</span> <span class=n>nx</span> <span class=o>=</span> <span class=n>gnext</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>nx</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>&amp;</span><span class=n>absentkey</span><span class=p>;</span>  <span class=o>/*</span> <span class=ow>not</span> <span class=n>found</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>      <span class=n>n</span> <span class=o>+=</span> <span class=n>nx</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è·å–å­—ç¬¦ä¸²çš„hashå€¼ï¼Œç„¶ååˆ¤æ–­å¯¹åº”çš„nodeæ˜¯ä¸æ˜¯short strç±»å‹ ä¸”æ˜¯å¦å’Œkeyç›¸ç­‰ï¼Œç›¸ç­‰åˆ™è¿”å›å¯¹åº”çš„valueï¼›ä¸æ˜¯çš„è¯åˆ™é€šè¿‡nextå­—æ®µæ‰¾åˆ°ä¸‹ä¸€ä¸ªnodeã€‚è¿™è¾¹çœ‹æ–¹å¼nextå­˜çš„ä¸æ˜¯ä¸‹ä¸€ä¸ªnodeçš„æŒ‡é’ˆï¼Œè€Œæ˜¯åç§»ã€‚</p><h2 id=luah_getint>luaH_getint</h2><p>è¿™ä¸ªå‡½æ•°çš„æ­¥éª¤å¤§æ¦‚å¦‚ä¸‹ï¼š</p><ol><li>ç¡®è®¤keyçš„èŒƒå›´æ˜¯ä¸æ˜¯åœ¨æ•°ç»„å¤§å°å†…ï¼Œå³ 0&lt; key &lt; alimit, å¦‚æœæ˜¯åˆ™ç›´æ¥è¿”å›array[key - 1]</li><li>å¦‚æœalimitä¸æ˜¯çœŸå®çš„æ•°ç»„é•¿åº¦ï¼Œä¸”keyæ˜¯åœ¨çœŸå®èŒƒå›´å†…çš„è¯ï¼Œåˆ™ä¹Ÿç›´æ¥è¿”å›array<a class=link href=%e8%bf%99%e8%be%b9%e4%b8%8d%e6%98%af%e7%9c%9f%e5%ae%9e%e7%9a%84%e6%95%b0%e7%bb%84%e9%95%bf%e5%ba%a6%e5%8e%9f%e5%9b%a0%e5%a5%bd%e5%83%8f%e6%98%af%e5%9b%a0%e4%b8%ba%e6%95%b0%e7%bb%84%e4%b8%ad%e5%8c%85%e5%90%ab%e4%ba%86nil>key - 1</a></li><li>å°è¯•ç”¨å­—å…¸çš„æ–¹å¼åœ¨æœç´¢ä¸€æ³¢keyã€‚</li><li>éƒ½å¤±è´¥äº†åˆ™è¿”å›absentkeyã€‚</li></ol><h2 id=getgeneric>getgeneric</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>static</span> <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>getgeneric</span> <span class=p>(</span><span class=n>Table</span> <span class=o>*</span><span class=n>t</span><span class=p>,</span> <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>key</span><span class=p>,</span> <span class=ne>int</span> <span class=n>deadok</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=ne>Node</span> <span class=o>*</span><span class=n>n</span> <span class=o>=</span> <span class=n>mainpositionTV</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(;;)</span> <span class=p>{</span>  <span class=o>/*</span> <span class=n>check</span> <span class=n>whether</span> <span class=s1>&#39;key&#39;</span> <span class=n>is</span> <span class=n>somewhere</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>chain</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>equalkey</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>deadok</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>gval</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>  <span class=o>/*</span> <span class=n>that</span><span class=s1>&#39;s it */</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=ne>int</span> <span class=n>nx</span> <span class=o>=</span> <span class=n>gnext</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>nx</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>&amp;</span><span class=n>absentkey</span><span class=p>;</span>  <span class=o>/*</span> <span class=ow>not</span> <span class=n>found</span> <span class=o>*/</span>
</span></span><span class=line><span class=cl>      <span class=n>n</span> <span class=o>+=</span> <span class=n>nx</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>getgeneric å‡½æ•°å°±æ˜¯å®Œå…¨å°†tableå½“ä½œhashè¡¨æ¥è¿›è¡Œæœç´¢äº†ã€‚æœç´¢ä»£ç ä¸Šå’Œshort hash åŸºæœ¬ä¸€æ ·çš„ï¼Œå…ˆé€šè¿‡mainpositionTVè·å–keyçš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œç„¶åé€šè¿‡è¿™ä¸ªä½ç½®ä¸æ–­çš„åœ¨tableä¸­å¯»æ‰¾åŒ¹é…çš„keyã€‚</p><p>mainpositionTV ä¸­ä¼šé€šè¿‡keyçš„ç±»å‹æ¥è·å–å¯¹åº”çš„hashå€¼ã€‚</p><h1 id=tableçš„æ’å…¥>tableçš„æ’å…¥</h1><p>table æ’å…¥çš„å…¥å£çœ‹èµ·æ¥æ˜¯luaH_set</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>void</span> <span class=n>luaH_set</span> <span class=p>(</span><span class=n>lua_State</span> <span class=o>*</span><span class=n>L</span><span class=p>,</span> <span class=n>Table</span> <span class=o>*</span><span class=n>t</span><span class=p>,</span> <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>key</span><span class=p>,</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>slot</span> <span class=o>=</span> <span class=n>luaH_get</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>luaH_finishset</span><span class=p>(</span><span class=n>L</span><span class=p>,</span> <span class=n>t</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>slot</span><span class=p>,</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ•´ä¸ªå‡½æ•°å°±2è¡Œï¼Œæ‰¾åˆ°ä¸€ä¸ªkeyï¼Œç„¶åè®¾ç½®æˆå¯¹åº”çš„value</p><h2 id=luah_finishset>luaH_finishset</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>void</span> <span class=n>luaH_finishset</span> <span class=p>(</span><span class=n>lua_State</span> <span class=o>*</span><span class=n>L</span><span class=p>,</span> <span class=n>Table</span> <span class=o>*</span><span class=n>t</span><span class=p>,</span> <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                   <span class=k>const</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>slot</span><span class=p>,</span> <span class=n>TValue</span> <span class=o>*</span><span class=n>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>isabstkey</span><span class=p>(</span><span class=n>slot</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>luaH_newkey</span><span class=p>(</span><span class=n>L</span><span class=p>,</span> <span class=n>t</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=n>setobj2t</span><span class=p>(</span><span class=n>L</span><span class=p>,</span> <span class=n>cast</span><span class=p>(</span><span class=n>TValue</span> <span class=o>*</span><span class=p>,</span> <span class=n>slot</span><span class=p>),</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨luaH_finishsetä¸­ï¼Œå¦‚æœslotæŸ¥æ‰¾å‡ºæ¥æ˜¯absentkeyï¼Œåˆ™ä¼šè°ƒç”¨luaH_newkeyåˆ›å»ºæ–°çš„keyï¼Œä¸ç„¶å°±ç›´æ¥è®¾ç½®valueå³å¯ã€‚</p><p>luaH_newkey å‡½æ•°æ¯”è¾ƒé•¿ï¼Œå»ºè®®å¯¹ç…§æºç æ¥çœ‹.</p><ol><li>é¦–å…ˆå…ˆè¦ç¡®è®¤keyå’Œvalue çš„ç±»å‹ï¼Œå½“keyæˆ–è€…valueä¸ºnilçš„æ—¶å€™ï¼Œæ˜¯ä¸å…è®¸æ’å…¥çš„ã€‚å¦‚æœkeyæ˜¯floatä¸”èƒ½è½¬æˆint çš„è¯ï¼Œåˆ™keyä¼šè¢«å½“åšintè¿›è¡Œæ’å…¥ã€‚</li><li>é€šè¿‡mainpositionTVæ¥æ‰¾åˆ°å¯¹åº”çš„node</li><li>å¦‚æœå‘ç°éœ€è¦æ‰©å®¹ï¼Œåˆ™æ‰§è¡Œrehashï¼Œç„¶åé€’å½’é‡æ–°æ‰§è¡ŒluaH_setã€‚</li><li>å¦‚æœæ‰¾åˆ°çš„nodeå·²ç»æœ‰æ•°æ®çš„è¯ï¼Œåˆ™é€šè¿‡è¿™æ­¥æ‰¾åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ï¼›</li><li>å°†æ‰¾åˆ°çš„nodeçš„keyå’Œvalueéƒ½è®¾ç½®å¥½ã€‚</li></ol><p>è¿™è¾¹çš„ç¬¬3ã€4æ­¥ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  mp = mainpositionTV(t, key);
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  // åˆ¤æ–­æ˜¯å¦å†²çªæˆ–è€…hashè¡¨çš„lastfreeä¸ºç©º
</span></span><span class=line><span class=cl>  if (!isempty(gval(mp)) || isdummy(t)) {  /* main position is taken? */
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // å…ˆæ‰¾ä¸€ä¸ªç©ºä½æ¥æ”¾è¿™ä¸ªå…ƒç´ 
</span></span><span class=line><span class=cl>    // getfreepos é»˜è®¤éƒ½æ˜¯ä»å†…å­˜å—çš„æœ€åå¾€å‰æ‰¾ä¸€ä¸ªæ²¡å…ƒç´ çš„ä½ç½®
</span></span><span class=line><span class=cl>    Node *othern;
</span></span><span class=line><span class=cl>    Node *f = getfreepos(t);  /* get a free place */
</span></span><span class=line><span class=cl>    if (f == NULL) {  /* cannot find a free place? */
</span></span><span class=line><span class=cl>      // æ²¡ä½ç½®äº†å°±rehash
</span></span><span class=line><span class=cl>      rehash(L, t, key);  /* grow table */
</span></span><span class=line><span class=cl>      /* whatever called &#39;newkey&#39; takes care of TM cache */
</span></span><span class=line><span class=cl>      luaH_set(L, t, key, value);  /* insert key into grown table */
</span></span><span class=line><span class=cl>      return;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    lua_assert(!isdummy(t));
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // å°†ç¢°æ’ä½ç½®çš„å…ƒç´ è¿›è¡Œä¸€æ¬¡hashæ¥åˆ¤æ–­è¿™ä¸ªå…ƒç´ æ˜¯å¦åº”è¯¥åœ¨è¿™é‡Œ
</span></span><span class=line><span class=cl>    othern = mainpositionfromnode(t, mp);
</span></span><span class=line><span class=cl>    if (othern != mp) {  /* is colliding node out of its main position? */
</span></span><span class=line><span class=cl>      /* yes; move colliding node into free position */
</span></span><span class=line><span class=cl>      // å°†ç¢°æ’çš„å…ƒç´ æ‰¾åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®æ’å…¥
</span></span><span class=line><span class=cl>      while (othern + gnext(othern) != mp)  /* find previous */
</span></span><span class=line><span class=cl>        othern += gnext(othern);
</span></span><span class=line><span class=cl>      gnext(othern) = cast_int(f - othern);  /* rechain to point to &#39;f&#39; */
</span></span><span class=line><span class=cl>      *f = *mp;  /* copy colliding node into free pos. (mp-&gt;next also goes) */
</span></span><span class=line><span class=cl>      // å°†æ–°å…ƒç´ æ’å…¥åˆ°åŸæ¥ç¢°æ’å…ƒç´ çš„ä½ç½®
</span></span><span class=line><span class=cl>      if (gnext(mp) != 0) {
</span></span><span class=line><span class=cl>        gnext(f) += cast_int(mp - f);  /* correct &#39;next&#39; */
</span></span><span class=line><span class=cl>        gnext(mp) = 0;  /* now &#39;mp&#39; is free */
</span></span><span class=line><span class=cl>      }
</span></span><span class=line><span class=cl>      setempty(gval(mp));
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    else {  
</span></span><span class=line><span class=cl>      // ç¢°æ’çš„ä½ç½®æ˜¯å¯¹åº”ä½ç½®ä¸Šçš„å…ƒç´ ï¼Œåˆ™å°†æ–°ä½ç½®é“¾æ¥åˆ°è¿™ä¸ªå…ƒç´ åé¢
</span></span><span class=line><span class=cl>      /* colliding node is in its own main position */
</span></span><span class=line><span class=cl>      /* new node will go into free position */
</span></span><span class=line><span class=cl>      if (gnext(mp) != 0)
</span></span><span class=line><span class=cl>        gnext(f) = cast_int((mp + gnext(mp)) - f);  /* chain new position */
</span></span><span class=line><span class=cl>      else lua_assert(gnext(f) == 0);
</span></span><span class=line><span class=cl>      gnext(mp) = cast_int(f - mp);
</span></span><span class=line><span class=cl>      mp = f;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  }
</span></span></code></pre></td></tr></table></div></div><p>luaçš„tableå’Œå…¶ä»–dictå®ç°çš„æœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œä»¥Pythonä¸ºä¾‹å­ï¼ŒPythonçš„hashè¡¨å®ç°æ˜¯hashè¡¨å’Œå…ƒç´ èŠ‚ç‚¹çš„å†…å­˜æ˜¯åˆ†å¼€çš„ï¼Œhashè¡¨ä¸­å­˜çš„æ˜¯å…ƒç´ çš„é“¾è¡¨ã€‚ä½†Luaä¸­hashè¡¨å’Œå…ƒç´ æ˜¯å…±ç”¨å†…å­˜çš„ï¼Œå³hashè¡¨å­˜çš„å°±æ˜¯å…ƒç´ ã€‚</p><p>è€Œä¸”å†²çªçš„æ—¶å€™çš„å¤„ç†ä¹ŸæŒºä¸ä¸€è‡´çš„ã€‚pythonå› ä¸ºå…ƒç´ å†…å­˜æ˜¯é¢å¤–ç”³è¯·çš„ï¼Œæ‰€ä»¥æ‰¾åˆ°ä½ç½®åç›´æ¥ä¿®æ”¹é“¾è¡¨å³å¯ã€‚è€ŒLuaåœ¨å†²çªçš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡lastfreeæŒ‡é’ˆåœ¨hashè¡¨ä»åå¾€å‰æ‰¾ä¸€ä¸ªç©ºé—²çš„å…ƒç´ ä½ç½®ï¼Œç„¶åæ ¹æ®å†²çªèŠ‚ç‚¹æ¥åˆ¤æ–­è¿™ä¸ªç©ºé—²çš„ä½ç½®åˆ°åº•æ˜¯ç»™æ–°èŠ‚ç‚¹è¿˜æ˜¯å†²çªèŠ‚ç‚¹ã€‚</p><p>æ„Ÿè§‰è¿™ç§å®ç°çš„è¯ï¼Œåº”è¯¥æ˜¯ä¸ºå†…å­˜æ•ˆç‡åšè€ƒè™‘ï¼Œä½†ä»£ä»·å°±æ˜¯å†²çªå¤„ç†çš„æ•ˆç‡è‚¯å®šæ˜¯ä½äºå…¶ä»–å®ç°çš„ï¼ŒåŒæ—¶tableåˆ é™¤å…ƒç´ æ˜¯å°†å¯¹åº”çš„valueä¿®æ”¹æˆnilæ¥å®ç°çš„ï¼Œæ‰€ä»¥lastfreeæŒ‡é’ˆåªä¼šä¸æ–­å‘å‰ï¼Œå¯¹äºä¼šé¢‘ç¹å¢åˆ çš„hashè¡¨æ¥è¯´ï¼Œåº”è¯¥æ˜¯ä¼šé€ æˆrehashçš„æ¬¡æ•°ä¸Šæ¶¨çš„ã€‚</p><h2 id=rehash>rehash</h2><p>lua tableçš„rehashå› ä¸ºåŒæ—¶åŒ…å«æ•°ç»„å’Œhashè¡¨çš„ï¼Œæ‰€ä»¥åœ¨rehashçš„æ—¶å€™ï¼Œä¼šåŒæ—¶æ”¹å˜è¿™ä¸¤ä¸ªéƒ¨åˆ†çš„å†…å®¹ã€‚luaH_resizeæ‰æ˜¯çœŸæ­£é‡æ–°åˆ†é…å†…å­˜çš„åœ°æ–¹ï¼Œè€Œä¹‹å‰çš„éƒ¨åˆ†éƒ½æ˜¯ä¸ºäº†è®¡ç®—å‡ºä¸€ä¸ªæ–°çš„æ•°ç»„å¤§å°å’Œhashè¡¨å¤§å°ã€‚
ä¸»è¦æ¶‰åŠåˆ°ä¸€ä¸‹å‡ ä¸ªå˜é‡ï¼š</p><ul><li>totaluse è¡¨ç¤ºæ‰€æœ‰keyçš„æ€»å’Œ</li><li>naè¡¨ç¤ºæ•°å­—éƒ¨åˆ†çš„keyçš„æ€»å’Œ</li><li>nums ä¸€ä¸ªç»Ÿè®¡æ•°ç»„ï¼Œnums[i] è¡¨ç¤º åœ¨ ï¼ˆ2^(i - 1)ï¼Œ 2^i] ä¹‹é—´çš„æ•°å­—keyçš„ä¸ªæ•°</li></ul><p>è¿™å‡ ä¸ªå˜é‡ä¼šåœ¨computesizes ä¸­è®¡ç®—å‡ºä¸€ä¸ªåˆé€‚çš„æ–°çš„æ•°ç»„éƒ¨åˆ†å¤§å°asizeï¼Œç”¨æ¥å­˜å‚¨æ•°å­—éƒ¨åˆ†çš„keyã€‚computesizeså‡½æ•°çš„ä¸»è¦æ€è·¯åº”è¯¥æ˜¯ç®—å‡ºä¸€ä¸ªæœ€å°çš„2çš„Næ¬¡å¹‚ï¼Œä½¿å¾—å…¶ä¸­æ•°å­—keyåœ¨[1, 2^N]çš„åˆ†å¸ƒèƒ½å¤Ÿå°äº50%ã€‚
è€Œå‰©ä½™çš„keyå°±ä¼šè®¤ä¸ºåº”è¯¥æ˜¯åœ¨hashè¡¨çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥totaluse - asize å°±æ˜¯æ–°çš„hashè¡¨å¤§å°ã€‚</p><p>luaH_resize å°±ä¼šå¯¹è¿™ä¸¤ä¸ªæ–°çš„å¤§å°è¿›è¡Œå†…å­˜çš„é‡æ–°åˆ†é…å’Œå…ƒç´ è¿ç§»ã€‚æ•°ç»„åˆ†éƒ¨ç”³è¯·æ–°çš„å†…å­˜ï¼Œç„¶åç›´æ¥å†…å­˜æ‹·è´ç›¸åŒå¤§å°éƒ¨åˆ†çš„æ•°æ®ã€‚hashè¡¨éƒ¨åˆ†éå†å…¨è¡¨ï¼Œæ‰¾åˆ°énilå…ƒç´ è¿›è¡Œæ¬è¿ï¼Œé‡æ–°è°ƒç”¨luaH_setå¯¹æ–°tableè¿›è¡Œæ’å…¥ï¼Œè¿™æ ·éœ€è¦æ¬è¿åˆ°æ•°ç»„éƒ¨åˆ†çš„å…ƒç´ ä¹Ÿå°±ä¼šè¿ç§»è¿‡å»äº†ã€‚</p><h2 id=å–é•¿åº¦æ“ä½œ>å–é•¿åº¦æ“ä½œ</h2><p>é€šè¿‡#æ“ä½œæ¥å¯¹tableè·å–é•¿åº¦çš„æ“ä½œå®é™…ä¸Šä¸æ˜¯å¸¸è§„æ„ä¹‰ä¸Šçš„å–é•¿åº¦.
&lsquo;#&lsquo;æ“ä½œç¬¦é€šè¿‡ luaH_getn æ¥å®Œæˆï¼ŒluaH_getnå®é™…ä¸Šæ˜¯è¿”å›nï¼Œæ»¡è¶³a[1]~a[n]æ‰€æœ‰å…ƒç´ ä¸ä¸ºç©º
ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹å­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>a = {4, 5, nil, nilï¼Œ6}
</span></span><span class=line><span class=cl>print(#a)
</span></span><span class=line><span class=cl>&gt;&gt; 5  -- åˆšåˆ›å»ºï¼Œæ‰€ä»¥åˆå§‹åŒ–äº†æ•°ç»„é•¿åº¦ï¼Œè¿”å›çš„è¿˜æ˜¯5
</span></span><span class=line><span class=cl>a[6] = 1
</span></span><span class=line><span class=cl>print(#a) 
</span></span><span class=line><span class=cl>&gt;&gt; 2  --å¤šå¡å…¥ä¸€ä¸ªï¼Œé€ æˆäº†rehashï¼Œæ•°ç»„é•¿åº¦éœ€è¦é€šè¿‡luaH_getnæ¥è·å¾—
</span></span></code></pre></td></tr></table></div></div><p>è¿™è¾¹å°±å¯ä»¥çœ‹å‡ºï¼Œåªè¦é€šè¿‡luaH_getnæ¥è·å–é•¿åº¦ï¼Œå¦‚æœæ•°ç»„åŒ…å«nilï¼Œé‚£ä¹ˆè·å–çš„ç»“æœå°±ä¸ä¸€å®šæ˜¯å®Œæ•´çš„æ•°ç»„çš„é•¿åº¦ã€‚</p><p>luaH_getn å®ç°å®é™…ä¸Šæ˜¯é€šè¿‡äºŒåˆ†çš„æ–¹å¼æ¥æ‰¾æ»¡è¶³ a[n - 1] ~= nil and a[n] == nil</p><p>è¿™è¾¹å°±ä¸åˆ†æå…·ä½“ä»£ç äº†ã€‚</p><h1 id=æ€»ç»“>æ€»ç»“</h1><p>é€šè¿‡é˜…è¯»tableçš„å¢åˆ æŸ¥æ”¹ï¼Œæ„Ÿè§‰åˆ°LUAå¯¹äºtableçš„å®ç°ä¸Šæ›´æ³¨é‡å†…å­˜çš„ä½¿ç”¨ï¼Œæ‰€å¸¦æ¥çš„ä»£ä»·å°±æ˜¯rehash å’Œå†²çªè§£å†³çš„æ¶ˆè€—å˜é«˜äº†ã€‚</p><p>è²Œä¼¼tableé»˜è®¤ä¹Ÿä¸æ”¯æŒå–æ­£ç¡®çš„é•¿åº¦ï¼Œå¯èƒ½åœ¨éœ€è¦tableé•¿åº¦çš„æ—¶å€™éœ€è¦æ³¨æ„è‡ªå·±ç»´æŠ¤ä¸€ä¸‹ï¼Œé¿å…æ¯æ¬¡éƒ½éå†tableæ¥è·å–é•¿åº¦</p><h1 id=å¼•ç”¨>å¼•ç”¨</h1><p>1.ã€Šluaè®¾è®¡ä¸å®ç°ã€‹</p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on 2023-09-23 00:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B/><div class=article-image><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B/lua.7d4a78cb68c4bf6f949bf65679bd0293_hu4963494264007616310.png width=250 height=150 loading=lazy alt="Featured image of post Lua æºç é˜…è¯»ç¬”è®°-å‡½æ•°è°ƒç”¨è¿‡ç¨‹" data-hash="md5-fUp4y2jEv2+Um/ZWeb0Ckw=="></div><div class=article-details><h2 class=article-title>Lua æºç é˜…è¯»ç¬”è®°-å‡½æ•°è°ƒç”¨è¿‡ç¨‹</h2></div></a></article><article class=has-image><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-lua%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/><div class=article-image><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-lua%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/lua.7d4a78cb68c4bf6f949bf65679bd0293_hu4963494264007616310.png width=250 height=150 loading=lazy alt="Featured image of post Lua æºç é˜…è¯»ç¬”è®°-Luaä»£ç æ‰§è¡Œè¿‡ç¨‹" data-hash="md5-fUp4y2jEv2+Um/ZWeb0Ckw=="></div><div class=article-details><h2 class=article-title>Lua æºç é˜…è¯»ç¬”è®°-Luaä»£ç æ‰§è¡Œè¿‡ç¨‹</h2></div></a></article><article class=has-image><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-chunk-%E5%8A%A0%E8%BD%BD%E7%9B%B8%E5%85%B3/><div class=article-image><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-chunk-%E5%8A%A0%E8%BD%BD%E7%9B%B8%E5%85%B3/lua.7d4a78cb68c4bf6f949bf65679bd0293_hu4963494264007616310.png width=250 height=150 loading=lazy alt="Featured image of post Lua æºç é˜…è¯»ç¬”è®°-chunk åŠ è½½ç›¸å…³" data-hash="md5-fUp4y2jEv2+Um/ZWeb0Ckw=="></div><div class=article-details><h2 class=article-title>Lua æºç é˜…è¯»ç¬”è®°-chunk åŠ è½½ç›¸å…³</h2></div></a></article><article class=has-image><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-string/><div class=article-image><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-string/lua.7d4a78cb68c4bf6f949bf65679bd0293_hu4963494264007616310.png width=250 height=150 loading=lazy alt="Featured image of post Lua æºç é˜…è¯»ç¬”è®°-String" data-hash="md5-fUp4y2jEv2+Um/ZWeb0Ckw=="></div><div class=article-details><h2 class=article-title>Lua æºç é˜…è¯»ç¬”è®°-String</h2></div></a></article><article class=has-image><a href=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/><div class=article-image><img src=/p/lua-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/lua.7d4a78cb68c4bf6f949bf65679bd0293_hu4963494264007616310.png width=250 height=150 loading=lazy alt="Featured image of post Lua æºç é˜…è¯»ç¬”è®°-åŸºæœ¬ç±»å‹" data-hash="md5-fUp4y2jEv2+Um/ZWeb0Ckw=="></div><div class=article-details><h2 class=article-title>Lua æºç é˜…è¯»ç¬”è®°-åŸºæœ¬ç±»å‹</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=FrozenLychees/FrozenLychees.github.io issue-term=pathname label=comments crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 FrozenLychees</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>